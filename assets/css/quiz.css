/**
 * ============================================================
 * Education Hub - Quiz Page Stylesheet (quiz.css)
 * ============================================================
 *
 * FILE NAVIGATION:
 *   LOADED BY: quiz.php (via <link rel="stylesheet">)
 *   DEPENDS ON: style.css (CSS variables, base styles)
 *   ALSO USES: quiz.css year-tab/semester-tab styles (shared classes)
 *
 * BACKEND FLOW (quiz.php):
 *   1. Reads filters from URL: ?year=FY&semester=1&subject=5&search=PHP
 *   2. Builds dynamic SQL: SELECT n.*, s.name, u.name FROM notes n
 *      JOIN subjects s ON n.subject_id = s.id
 *      JOIN users u ON n.uploaded_by = u.id
 *      WHERE conditions based on filters
 *   3. Renders year tabs → semester tabs → search bar → note cards
 *   4. Download button links to download_notes.php?id=X
 *
 * DATABASE TABLES:
 *   - notes (id, title, content, file_path, subject_id, uploaded_by, downloads)
 *   - subjects (id, name, color, year, semester)
 *   - users (id, name) — for uploader info
 *
 * NAVIGATION FROM THIS PAGE:
 *   → download_notes.php?id=X (file download handler)
 *   → Sidebar links (all pages)
 *
 * COLOR SCHEME: Royal Blue + Sky Blue (inherits from style.css)
 * ============================================================
 */


/* ===========================================================
   HERO SECTION — Page title with gradient bg
   =========================================================== */
.quiz-hero {
    text-align: center;
    padding: 40px 24px;
    margin-bottom: 24px;
    background: var(--gradient-hero);
    border-radius: var(--radius-xl);
    border: 1px solid var(--border);
}

.quiz-hero h1 {
    font-size: 32px;
    font-weight: 800;
    margin-bottom: 8px;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.quiz-hero p {
    color: var(--text-muted);
    font-size: 15px;
}


/* ===========================================================
   YEAR TABS — FY / SY / TY selection (State 1)
   Each tab has a colored year badge (green/amber/red).
   Clicking a tab reloads page with ?year=FY filter.
   =========================================================== */
.year-tabs {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
    flex-wrap: wrap;
}

.year-tab {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 20px;
    background: var(--surface);
    border: 2px solid var(--border);
    border-radius: var(--radius-md);
    color: var(--text);
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition);
    box-shadow: var(--shadow-sm);
}

.year-tab:hover {
    border-color: var(--primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

/* Active year: filled with royal blue */
.year-tab.active {
    background: var(--primary);
    border-color: var(--primary);
    color: white;
    box-shadow: var(--shadow-primary);
}

/* Year badge pill */
.year-badge {
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 700;
}

.year-badge.fy { background: var(--success); color: white; }
.year-badge.sy { background: var(--warning); color: white; }
.year-badge.ty { background: var(--danger); color: white; }

.year-tab.active .year-badge { background: rgba(255, 255, 255, 0.3); }


/* ===========================================================
   SEMESTER TABS — Pill-style (Sem 1 / Sem 2) (State 1)
   Appears when a year is selected. Filters subjects further.
   =========================================================== */
.semester-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 24px;
    padding: 6px;
    background: var(--surface);
    border-radius: var(--radius-md);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-sm);
}

.semester-tab {
    padding: 10px 20px;
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    color: var(--text-muted);
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition);
    cursor: pointer;
}

.semester-tab:hover { background: var(--surface-light); color: var(--text); }
.semester-tab.active { background: var(--primary); color: white; }


/* ===========================================================
   SUBJECT SELECTION GRID — Clickable subject cards (State 1)
   Each card links to quiz.php?subject=ID to start quiz
   =========================================================== */
.subject-selection-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 24px;
}

.quiz-subject-card {
    position: relative;
    background: var(--surface);
    border-radius: var(--radius-xl);
    padding: 28px;
    border: 2px solid var(--border);
    cursor: pointer;
    transition: var(--transition);
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    display: block;
    box-shadow: var(--shadow-sm);
}

/* Top accent stripe (hidden → visible on hover) */
.quiz-subject-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 4px;
    background: var(--gradient-primary);
    opacity: 0;
    transition: opacity 0.3s;
}

.quiz-subject-card:hover {
    transform: translateY(-6px);
    border-color: var(--primary);
    box-shadow: var(--shadow-lg);
}
.quiz-subject-card:hover::before { opacity: 1; }

/* Disabled card (no questions) */
.quiz-subject-card.disabled { opacity: 0.5; cursor: not-allowed; }
.quiz-subject-card.disabled:hover { transform: none; box-shadow: var(--shadow-sm); }

.subject-card-icon {
    width: 56px;
    height: 56px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    margin-bottom: 14px;
    background: var(--primary-light);
}

.subject-card-year {
    font-size: 12px; font-weight: 600; color: var(--text-muted);
    margin-bottom: 8px; padding: 4px 10px;
    background: var(--surface-light);
    display: inline-block; border-radius: 6px;
}

.subject-card-title { font-size: 17px; font-weight: 700; margin-bottom: 12px; line-height: 1.4; color: var(--text); }

.subject-card-stats { display: flex; align-items: center; gap: 8px; }

.stat-badge {
    display: inline-flex; align-items: center; gap: 4px;
    padding: 6px 12px; background: var(--primary-lighter);
    border-radius: var(--radius-full); font-size: 13px; color: var(--primary);
    font-weight: 500;
}

/* Arrow icon (bottom-right) */
.subject-card-arrow {
    position: absolute; right: 20px; bottom: 20px;
    width: 36px; height: 36px; border-radius: 50%;
    background: var(--surface-light);
    display: flex; align-items: center; justify-content: center;
    transition: var(--transition); font-size: 16px; color: var(--text-muted);
}
.quiz-subject-card:hover .subject-card-arrow {
    background: var(--primary); color: white;
    transform: translateX(4px);
    box-shadow: var(--shadow-primary);
}

/* "No questions" badge */
.no-questions-badge {
    position: absolute; right: 16px; bottom: 20px;
    padding: 6px 12px; background: var(--danger-light); color: var(--danger);
    border-radius: var(--radius-sm); font-size: 12px; font-weight: 500;
}


/* ===========================================================
   QUIZ HEADER — Back link + quiz title (State 2)
   =========================================================== */
.quiz-header { margin-bottom: 24px; }

.back-link {
    display: inline-flex; align-items: center; gap: 8px;
    color: var(--text-muted); text-decoration: none;
    margin-bottom: 12px; font-size: 14px; transition: color 0.3s;
}
.back-link:hover { color: var(--primary); }

.quiz-header h2 { font-size: 26px; font-weight: 700; color: var(--text); }


/* ===========================================================
   PROGRESS BAR — Quiz completion tracker (State 2)
   Shows "3 / 10" answered. Bar fills with gradient.
   JavaScript updates width via updateProgress() function.
   =========================================================== */
.quiz-progress-container { margin-bottom: 28px; }

.quiz-progress-header {
    display: flex; justify-content: space-between;
    align-items: center; margin-bottom: 10px;
}

.quiz-progress-title { font-size: 14px; color: var(--text-muted); }
.quiz-progress-count { font-size: 14px; font-weight: 600; color: var(--primary); }

.quiz-progress-bar {
    height: 8px;
    background: var(--primary-light);
    border-radius: 10px;
    overflow: hidden;
}

.quiz-progress-fill {
    height: 100%;
    background: var(--gradient-primary);
    border-radius: 10px;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}


/* ===========================================================
   QUESTION CARD — One question at a time (State 2)
   Left accent stripe indicates active question.
   =========================================================== */
.quiz-question-card {
    background: var(--surface);
    border-radius: var(--radius-xl);
    padding: 32px;
    margin-bottom: 24px;
    border: 1px solid var(--border);
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
}

/* Left vertical accent stripe */
.quiz-question-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 4px; height: 100%;
    background: var(--gradient-primary);
}

.question-header { margin-bottom: 20px; }

/* "Question 3 of 10" badge */
.question-badge {
    display: inline-flex; align-items: center; gap: 8px;
    padding: 8px 16px; background: var(--primary-light);
    border-radius: var(--radius-full);
    font-size: 14px; font-weight: 600; color: var(--primary);
}

.quiz-question-text {
    font-size: 19px; font-weight: 600; line-height: 1.5;
    margin-bottom: 24px; color: var(--text);
}


/* ===========================================================
   ANSWER OPTIONS — Radio buttons styled as cards (State 2)
   Each option: indicator circle (A/B/C/D) + text label
   =========================================================== */
.quiz-options-grid { display: grid; gap: 12px; }

.quiz-option {
    position: relative;
    display: flex; align-items: center; gap: 16px;
    padding: 16px 20px; background: var(--surface-light);
    border-radius: var(--radius-md); cursor: pointer;
    border: 2px solid transparent; transition: var(--transition);
}

.quiz-option:hover {
    border-color: var(--primary);
    background: var(--primary-light);
    transform: translateX(6px);
}

/* Hide native radio */
.quiz-option input[type="radio"] { display: none; }

/* Selected state: gradient indicator */
.quiz-option input[type="radio"]:checked + .option-indicator {
    background: var(--gradient-primary);
    border-color: transparent; color: white;
}
.quiz-option input[type="radio"]:checked + .option-indicator::after { content: '✓'; }
.quiz-option input[type="radio"]:checked ~ .option-text { color: var(--primary); font-weight: 600; }

/* Circle indicator (A/B/C/D) */
.option-indicator {
    width: 36px; height: 36px; min-width: 36px;
    border-radius: 50%; border: 2px solid var(--border);
    display: flex; align-items: center; justify-content: center;
    font-weight: 700; font-size: 14px; transition: var(--transition);
}

.option-text { font-size: 15px; flex: 1; color: var(--text); }


/* ===========================================================
   SUBMIT SECTION — "Submit Quiz" button area (State 2)
   =========================================================== */
.quiz-submit-section {
    text-align: center;
    margin-top: 32px; padding: 28px;
    background: var(--primary-light);
    border-radius: var(--radius-xl);
    border: 1px solid var(--border);
}

.quiz-submit-btn {
    padding: 16px 44px; font-size: 17px; font-weight: 700;
    background: var(--gradient-primary); color: white;
    border: none; border-radius: var(--radius-lg);
    cursor: pointer; transition: var(--transition);
    box-shadow: var(--shadow-primary);
    font-family: inherit;
}

.quiz-submit-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(26, 86, 219, 0.35);
}


/* ===========================================================
   RESULTS SECTION — Score circle + stats + review (State 3)
   Score circle uses CSS conic-gradient for pie-chart effect.
   Results are saved to quiz_results table before rendering.
   =========================================================== */
.quiz-results-container { text-align: center; }

.results-hero {
    padding: 40px 28px;
    background: var(--gradient-hero);
    border-radius: var(--radius-xl);
    margin-bottom: 32px;
    border: 1px solid var(--border);
}

.results-emoji { font-size: 56px; margin-bottom: 14px; }

/* Score circle: conic-gradient ring */
.score-circle {
    width: 150px; height: 150px;
    margin: 0 auto 20px;
    position: relative;
    display: flex; align-items: center; justify-content: center;
}

.score-circle-bg {
    position: absolute;
    width: 100%; height: 100%;
    border-radius: 50%;
    background: conic-gradient(
        var(--primary) calc(var(--score) * 1%),
        var(--primary-light) calc(var(--score) * 1%)
    );
}

.score-circle-inner {
    width: 120px; height: 120px;
    background: var(--surface);
    border-radius: 50%;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    z-index: 1;
    box-shadow: var(--shadow-sm);
}

.score-value {
    font-size: 34px; font-weight: 800;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.score-label { font-size: 13px; color: var(--text-muted); }

.results-title { font-size: 26px; font-weight: 800; color: var(--text); margin-bottom: 6px; }
.results-subtitle { color: var(--text-muted); font-size: 15px; margin-bottom: 20px; }

/* Stats row */
.results-stats { display: flex; justify-content: center; gap: 36px; margin-bottom: 20px; }
.result-stat { text-align: center; }
.result-stat-value { font-size: 26px; font-weight: 700; color: var(--primary); }
.result-stat-label { font-size: 13px; color: var(--text-muted); }

.btn-lg { padding: 14px 28px; font-size: 15px; }


/* ===========================================================
   REVIEW SECTION — Answer review cards (State 3)
   Green left stripe = correct, red = wrong
   =========================================================== */
.review-title { text-align: left; font-size: 20px; margin-bottom: 18px; color: var(--text); }

.review-list { display: flex; flex-direction: column; gap: 14px; text-align: left; }

.review-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 22px;
    border: 1px solid var(--border);
    box-shadow: var(--shadow-sm);
    position: relative; overflow: hidden;
}

.review-card::before {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 4px;
}

.review-card.correct::before { background: var(--success); }
.review-card.wrong::before { background: var(--danger); }

.review-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.review-number { font-weight: 700; color: var(--primary); font-size: 14px; }
.review-status { font-size: 13px; font-weight: 600; }
.review-question { font-size: 15px; margin-bottom: 10px; line-height: 1.5; color: var(--text); }
.review-answers { display: flex; gap: 16px; font-size: 13px; }
.your-answer { color: var(--danger); }
.correct-answer { color: var(--success); font-weight: 600; }


/* ===========================================================
   EMPTY STATE
   =========================================================== */
.empty-state {
    grid-column: 1 / -1;
    text-align: center; padding: 60px 30px;
    background: var(--surface);
    border-radius: var(--radius-xl);
    border: 2px dashed var(--border);
}
.empty-icon { font-size: 56px; margin-bottom: 14px; }
.empty-state h3 { font-size: 22px; margin-bottom: 8px; color: var(--text); }
.empty-state p { color: var(--text-muted); }


/* ===========================================================
   RESPONSIVE
   =========================================================== */
@media (max-width: 768px) {
    .year-tabs { overflow-x: auto; padding-bottom: 8px; flex-wrap: nowrap; }
    .year-tab { white-space: nowrap; padding: 10px 16px; font-size: 14px; }
    .quiz-question-card { padding: 20px; }
    .quiz-question-text { font-size: 16px; }
    .quiz-option { padding: 14px 16px; }
    .results-stats { gap: 20px; }
}
